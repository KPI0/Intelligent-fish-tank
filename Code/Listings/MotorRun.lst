C51 COMPILER V9.52.0.0   MOTORRUN                                                          11/05/2022 13:48:01 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MOTORRUN
OBJECT MODULE PLACED IN .\Objects\MotorRun.obj
COMPILER INVOKED BY: D:\Keil_vn\C51\BIN\C51.EXE E:\Download\5¡¢»ùÓÚ51µ¥Æ¬»ú¡ª¡ª²½½øµç»ú¿ØÖÆÊµÑé\5¡¢»ùÓÚ51µ¥Æ¬»ú¡ª¡ª²½½øµ
                    -ç»ú¿ØÖÆÊµÑé\MotorRun.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\MotorRun.lst) TABS(2) OBJECT(.\Objects\MotorRun.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "delaytime10us.h"
   3          
   4          #define uint unsigned int
   5          
   6          sbit MA=P1^0;
   7          sbit MB=P1^1;
   8          sbit MC=P1^2;
   9          sbit MD=P1^3;
  10          
  11          
  12          /*
  13          angle£º½Ç¶È£¬·¶Î§[0,360]
  14          drct£ºÐý×ª·½Ïò£¬0£ºË³Ê±Õë£¬1£ºÄæÊ±Õë
  15          speed£º×ªËÙ£¬·¶Î§[1,100]
  16          */
  17          
  18          void MotorRun(unsigned int nangle, drct, speed)         //nangle=4096ÎªÒ»È¦            speed×ªËÙ75`400
  19          {
  20   1        uint step;
  21   1        step=0;
  22   1        if(drct==0)
  23   1        {
  24   2          while(nangle--)
  25   2          {
  26   3            switch(step)//8ÅÄ·½Ê½Çý¶¯
  27   3            {
  28   4              case 0:MA=1;MB=0;MC=0;MD=0;break;
  29   4              case 1:MA=1;MB=1;MC=0;MD=0;break;
  30   4              case 2:MA=0;MB=1;MC=0;MD=0;break;
  31   4              case 3:MA=0;MB=1;MC=1;MD=0;break;
  32   4              case 4:MA=0;MB=0;MC=1;MD=0;break;
  33   4              case 5:MA=0;MB=0;MC=1;MD=1;break;
  34   4              case 6:MA=0;MB=0;MC=0;MD=1;break;
  35   4              case 7:MA=1;MB=0;MC=0;MD=1;break;
  36   4            }
  37   3            if(step==7)step=0;
  38   3            else step++;
  39   3            delay(speed);
  40   3          }
  41   2        }
  42   1        else
  43   1        {
  44   2          while(nangle--)
  45   2          {
  46   3            switch(step)
  47   3            {
  48   4              case 0:MA=1;MB=0;MC=0;MD=1;break;
  49   4              case 1:MA=0;MB=0;MC=0;MD=1;break;
  50   4              case 2:MA=0;MB=0;MC=1;MD=1;break;
  51   4              case 3:MA=0;MB=0;MC=1;MD=0;break;
  52   4              case 4:MA=0;MB=1;MC=1;MD=0;break;
  53   4              case 5:MA=0;MB=1;MC=0;MD=0;break;
  54   4              case 6:MA=1;MB=1;MC=0;MD=0;break;
C51 COMPILER V9.52.0.0   MOTORRUN                                                          11/05/2022 13:48:01 PAGE 2   

  55   4              case 7:MA=1;MB=0;MC=0;MD=0;break;
  56   4            }
  57   3            if(step==7)step=0;
  58   3            else step++;
  59   3            delay(speed);
  60   3          }
  61   2        }
  62   1        MA=0;MB=0;MC=0;MD=0;
  63   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    327    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
